C51 COMPILER V9.59.0.0   BUTTON                                                            09/05/2025 19:07:46 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE BUTTON
OBJECT MODULE PLACED IN .\Obj\button.obj
COMPILER INVOKED BY: D:\Program Files\Keil\Keil_v5\C51\BIN\C51.EXE App\Button\button.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.
                    -\Public;.\App\LCD1602;.\App\LED;.\App\Button;.\App\Beep;.\App\Motor;.\App\Change;.\App\Paused;.\App\Eeprow) DEBUG OBJECT
                    -EXTEND PRINT(.\Obj\button.lst) TABS(2) OBJECT(.\Obj\button.obj)

line level    source

   1          #include "button.h" 
   2          
   3          //按键部分，占用P1
   4          uchar button_is()
   5          {  
   6   1        
   7   1        //定位逻辑：0f时进行行定位，f0时进行列定位（eg：f0同一列按下后均变为低电平，0f同理）
   8   1        uchar key=0;
   9   1        button_data=0x0f;
  10   1        if(button_data!=0x0f)
  11   1        {
  12   2          delay_us(100);   //消除抖动
  13   2          if(button_data!=0x0f)
  14   2          {
  15   3            button_data=0x0f;
  16   3            switch(button_data)
  17   3            {
  18   4              case 0x07: key=1;break;
  19   4              case 0x0b: key=2;break;
  20   4              case 0x0d: key=3;break;
  21   4              case 0x0e: key=4;break;
  22   4            }
  23   3            button_data=0xf0;
  24   3            switch(button_data)//保存列为 0，按键按下后的键值
  25   3            {
  26   4              case 0x70: key=key;break;
  27   4              case 0xb0: key=key+4;break;
  28   4              case 0xd0: key=key+8;break;
  29   4              case 0xe0: key=key+12;break;
  30   4            }
  31   3            while(button_data!=0xf0);//等待按键松开
  32   3          }
  33   2        }
  34   1        else key=0;
  35   1        
  36   1        switch(key)
  37   1        {
  38   2          case 1:return '7';
  39   2          case 2:return '8';
  40   2          case 3:return '9';
  41   2          case 4:return 'a';
  42   2          case 5:return '4';
  43   2          case 6:return '5';
  44   2          case 7:return '6';
  45   2          case 8:return 'b';
  46   2          case 9:return '1';
  47   2          case 10:return '2';
  48   2          case 11:return '3';
  49   2          case 12:return 'c';
  50   2          case 13:return 'A';
  51   2          case 14:return '0';
  52   2          case 15:return 'B';
  53   2          case 16:return '%';
C51 COMPILER V9.59.0.0   BUTTON                                                            09/05/2025 19:07:46 PAGE 2   

  54   2          default:return 0;
  55   2        }
  56   1      }
  57          
  58            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    235    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
